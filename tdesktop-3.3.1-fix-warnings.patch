diff -up tdesktop-3.3.1-full/Telegram/ThirdParty/dispatch/src/BlocksRuntime/runtime.c.4~ tdesktop-3.3.1-full/Telegram/ThirdParty/dispatch/src/BlocksRuntime/runtime.c
--- tdesktop-3.3.1-full/Telegram/ThirdParty/dispatch/src/BlocksRuntime/runtime.c.4~	2021-09-17 06:54:52.000000000 +0200
+++ tdesktop-3.3.1-full/Telegram/ThirdParty/dispatch/src/BlocksRuntime/runtime.c	2021-12-25 17:11:50.101669278 +0100
@@ -468,7 +468,6 @@ static void _Block_byref_assign_copy(voi
 // Old compiler SPI
 static void _Block_byref_release(const void *arg) {
     struct Block_byref *byref = (struct Block_byref *)arg;
-    int32_t refcount;
 
     // dereference the forwarding pointer since the compiler isn't doing this anymore (ever?)
     byref = byref->forwarding;
@@ -478,8 +477,7 @@ static void _Block_byref_release(const v
     if ((byref->flags & BLOCK_BYREF_NEEDS_FREE) == 0) {
         return; // stack or GC or global
     }
-    refcount = byref->flags & BLOCK_REFCOUNT_MASK;
-	os_assert(refcount);
+    os_assert(byref->flags & BLOCK_REFCOUNT_MASK);
     if (latching_decr_int_should_deallocate(&byref->flags)) {
         if (byref->flags & BLOCK_BYREF_HAS_COPY_DISPOSE) {
             struct Block_byref_2 *byref2 = (struct Block_byref_2 *)(byref+1);
